#!/usr/bin/env cbqn
âŸ¨For, ParseInts, StartsWithâŸ© â† â€¢Import "../lib.bqn"
Decode â† { F x:
    lpiâ€¿rpi â† x âŠ '('â€¿')'
    {
        lpi = rpi ? âŸ¨rpi, ""âŸ©;
        âŸ¨n, mâŸ© â† ParseInts lpiâ†“rpiâ†‘x
        post â† âŠ‘Decode (1+n+rpi)â†“x
        âŸ¨post+lpi+nÃ—m, (1+n+rpi)â†“xâŸ©
    }
}
example â† âŸ¨
    0â€¿""
    6â€¿"ADVENT"
    7â€¿"A(1x5)BC"
    9â€¿"(3x3)XYZ"
    11â€¿"A(2x2)BCD(2x2)EFG"
    6â€¿"(6x1)(1x3)A"
    18â€¿"X(8x2)(3x3)ABCY"
âŸ©
â€¢Show â‰âŸœ((Decode(1âŠ¸âŠ‘))Â¨) example
# Part 1: #####################################
Decode1 â† { F x:
    lpiâ€¿rpi â† x âŠ '('â€¿')'
    {
        lpi = rpi ? rpi;
        âŸ¨n, mâŸ© â† ParseInts lpiâ†“rpiâ†‘x
        post â† Decode1 (1+n+rpi)â†“x
        post+lpi+nÃ—m
    }
}
â€¢Show +Â´ Decode1Â¨ â¥Š â€¢FLines "../../data/2016/input-day09.txt"
# Part 2: #####################################
Decode2 â† { k F x:
    lpiâ€¿rpi â† x âŠ '('â€¿')'
    {
        lpi = rpi ? kÃ—rpi;
        âŸ¨n, mâŸ© â† ParseInts lpiâ†“rpiâ†‘x
        target â† (kÃ—m) Decode2 nâ†‘(1+rpi)â†“x
        post â† k Decode2 (1+n+rpi)â†“x
        post+target
    }
}
â€¢Show +Â´ {1 Decode2 ğ•©}Â¨ â¥Š â€¢FLines "../../data/2016/input-day09.txt"
